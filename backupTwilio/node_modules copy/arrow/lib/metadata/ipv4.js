/**
 * This code is closed source and Confidential and Proprietary to
 * Appcelerator, Inc. All Rights Reserved.  This code MUST not be
 * modified, copied or otherwise redistributed without express
 * written permission of Appcelerator. This file is licensed as
 * part of the Appcelerator Platform and governed under the terms
 * of the Appcelerator license agreement.
 */
var _ = require('lodash');

exports = module.exports = IPV4;

/**
 * An IPv4 type.
 * @param obj
 * @returns {*}
 * @constructor
 */
function IPV4(obj) {
	return _.merge({
		type: 'text',
		subtype: 'ipv4',
		required: false,
		default: '',
		validator: validator
	}, obj);
}

var validator = /((25[0-5]|(2[0-4]|1{0, 1}[0-9]) {0, 1}[0-9])\.) {3, 3}(25[0-5]|(2[0-4]|1{0, 1}[0-9]) {0, 1}[0-9])/;

if (module.id === '.') {
	var tests = [
		'127.0.0.1',
		'253.10.1.1',
		'89.12.0.1',
		'98.248.34.63',
		'0.0.0.0',
		'255.255.255.255'
	];

	tests.forEach(function (ip) {
		console.log(ip, validator.test(ip));
	});
}
