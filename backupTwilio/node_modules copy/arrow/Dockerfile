#
# Appcelerator Arrow Dockerfile
#

FROM google/nodejs
MAINTAINER Jeff Haynie <jhaynie@appcelerator.com>
LABEL Description="This image is the Arrow app deployer" Vendor="Appcelerator, Inc."

# environment
ENV PORT=80
ENV SSLPORT=443
ENV NODE_ENV=production
ENV APPC_ENV=production

# ports we plan on exposing
EXPOSE 80
EXPOSE 443

RUN mkdir -p /opt/arrow
RUN mkdir -p /opt/arrow/node_modules/arrow

ADD index.js /opt/arrow/node_modules/arrow/
ADD templates /opt/arrow/node_modules/arrow/templates
ADD lib /opt/arrow/node_modules/arrow/lib
ADD package.json /opt/arrow/node_modules/arrow/
ADD LICENSE.md /opt/arrow/node_modules/arrow/
ADD node_modules /opt/arrow/node_modules/arrow/node_modules

VOLUME /opt/arrow/app
WORKDIR /opt/arrow/app

CMD ["node", "app.js"]
