<pre class="highlight javascript"><span class="hljs-keyword">var</span> APIBuilder = <span class="hljs-built_in">require</span>(<span class="hljs-string">'apibuilder'</span>);

<span class="hljs-keyword">var</span> TestAPI = APIBuilder.API.extend({
    name: <span class="hljs-string">'test'</span>,
    path: <span class="hljs-string">'/test/:id'</span>,
    method: <span class="hljs-string">'GET'</span>,
    description: <span class="hljs-string">'this is an api that shows how to implement an API'</span>,
    model: <span class="hljs-string">'user'</span>,
    before: <span class="hljs-string">'pre_example'</span>,
    after: <span class="hljs-string">'post_example'</span>,
    parameters: {
        id: {description:<span class="hljs-string">'the user id'</span>}
    },
    action: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, resp, next</span>) </span>{
        <span class="hljs-comment">// invoke the model find method passing the id parameter</span>
        <span class="hljs-comment">// stream the result back as response</span>
        resp.stream(req.model.find, req.params.id, next);
    }
});

<span class="hljs-built_in">module</span>.exports = TestAPI;</pre>